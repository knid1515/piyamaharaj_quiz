<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>แบบทดสอบวันปิยมหาราช</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1 id="page-title">วันปิยมหาราช</h1>

        <div id="article-section">
            <div class="article-content">
                <h2>ความสำคัญของวันปิยมหาราช</h2>
                <p><strong>วันปิยมหาราช</strong> ตรงกับวันที่ 23 ตุลาคมของทุกปี เป็นวันคล้ายวันสวรรคตของพระบาทสมเด็จพระจุลจอมเกล้าเจ้าอยู่หัว (รัชกาลที่ 5) พระองค์ทรงเป็นพระมหากษัตริย์ที่ทรงปฏิบัติพระราชกรณียกิจเพื่อพัฒนาประเทศชาติในทุกๆ ด้าน และทรงเป็นที่รักยิ่งของพสกนิกรทั้งชาวไทยและชาวต่างชาติ จึงได้รับการถวายพระราชสมัญญานามว่า <strong>"พระปิยมหาราช"</strong> ซึ่งหมายถึง "พระมหากษัตริย์ที่ทรงเป็นที่รักยิ่งของปวงชน"</p>

                <h3>พระราชประวัติโดยสังเขป</h3>
                <p>พระบาทสมเด็จพระจุลจอมเกล้าเจ้าอยู่หัว เสด็จพระราชสมภพเมื่อวันที่ 20 กันยายน พ.ศ. 2396 เป็นพระราชโอรสในพระบาทสมเด็จพระจอมเกล้าเจ้าอยู่หัว (รัชกาลที่ 4) และสมเด็จพระเทพศิรินทราบรมราชินี ทรงขึ้นครองราชย์เมื่อวันที่ 1 ตุลาคม พ.ศ. 2411 ขณะพระชนมายุ 15 พรรษา</p>

                <h3>พระราชกรณียกิจที่สำคัญ</h3>
                <ul>
                    <li><strong>การเลิกทาส:</strong> ทรงประกาศใช้พระราชบัญญัติเลิกทาสอย่างเป็นขั้นเป็นตอน ทำให้ทาสทุกคนได้รับอิสรภาพโดยไม่มีการนองเลือด</li>
                    <li><strong>การปฏิรูประบบราชการ:</strong> ทรงยกเลิกระบบจตุสดมภ์ และจัดตั้งกระทรวงต่างๆ ขึ้นใหม่ 12 กระทรวง เพื่อการบริหารราชการแผ่นดินที่มีประสิทธิภาพ</li>
                    <li><strong>การป้องกันการคุกคามจากมหาอำนาจตะวันตก:</strong> ทรงดำเนินวิเทโศบายทางการทูตอย่างชาญฉลาด เสด็จประพาสยุโรปถึง 2 ครั้ง เพื่อสร้างความสัมพันธ์อันดีกับนานาประเทศ ทำให้ประเทศไทยรอดพ้นจากการตกเป็นอาณานิคม</li>
                    <li><strong>การพัฒนาสาธารณูปโภค:</strong> ทรงริเริ่มกิจการไปรษณีย์ โทรเลข การรถไฟ การไฟฟ้า และการประปา ซึ่งเป็นรากฐานสำคัญของการพัฒนาประเทศในยุคต่อมา</li>
                    <li><strong>การศึกษา:</strong> ทรงส่งเสริมการศึกษา โดยจัดตั้งโรงเรียนหลวงสำหรับสามัญชน และส่งนักเรียนไทยไปศึกษาต่อต่างประเทศ</li>
                    <li><strong>การทหาร:</strong> ทรงปฏิรูปการทหารให้ทันสมัยตามแบบตะวันตก</li>
                </ul>

                <p>พระองค์เสด็จสวรรคตเมื่อวันที่ 23 ตุลาคม พ.ศ. 2453 ณ พระที่นั่งอัมพรสถาน พระราชวังดุสิต ด้วยพระชนมายุ 57 พรรษา พระราชกรณียกิจของพระองค์ยังคงเป็นรากฐานสำคัญในการพัฒนาประเทศไทยให้เจริญก้าวหน้ามาจนถึงปัจจุบัน</p>

                <div class="article-image-container">
                    <p>
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1d/King_Rama_V_equestrian_statue.jpg/600px-King_Rama_V_equestrian_statue.jpg" 
                             alt="พระบรมรูปทรงม้า" 
                             title="พระบรมรูปทรงม้า พระบาทสมเด็จพระจุลจอมเกล้าเจ้าอยู่หัว">
                    </p>
                    <p class="image-caption">พระบรมรูปทรงม้า พระบาทสมเด็จพระจุลจอมเกล้าเจ้าอยู่หัว (ที่มา: Wikipedia)</p>
                </div>
            </div>
            <button id="start-quiz-button">ฉันอ่านจบแล้ว! เริ่มทำแบบทดสอบ</button>
        </div>

        <div id="quiz-section" style="display: none;">
            <h1 id="quiz-header">แบบทดสอบวันปิยมหาราช</h1>

            <form id="quiz-form"></form>
            
            <div id="results" class="results-container" style="display: none;">
                <p id="score"></p>
                <div id="answer-details"></div>
                <div id="post-quiz-action"></div>
            </div>

            <div id="certificate" class="certificate-container" style="display: none;">
                <div class="certificate-header">
                    <h2>ใบเกียรติบัตร</h2>
                    <h3>Certificate of Achievement</h3>
                </div>
                <div class="certificate-body">
                    <p>มอบให้แด่</p>
                    <h1 id="cert-name" class="cert-name"></h1>
                    <p>เนื่องในโอกาสผ่านการทดสอบความรู้ "วันปิยมหาราช"</p>
                    <p>ด้วยคะแนนยอดเยี่ยม</p>
                    <h2 id="cert-score"></h2>
                </div>
                <div class="certificate-footer">
                    <p>ให้ไว้ ณ วันที่ <span id="cert-date"></span></p>
                </div>
            </div>
        </div>

    </div>

    <script>
        const quizData = [
            { question: "วันปิยมหาราชตรงกับวันที่เท่าใดของทุกปี", options: ["5 ธันวาคม", "23 ตุลาคม", "13 ตุลาคม", "10 ธันวาคม"], correctAnswer: "23 ตุลาคม" },
            { question: "'พระปิยมหาราช' เป็นพระราชสมัญญานามของพระมหากษัตริย์รัชกาลใด", options: ["รัชกาลที่ 4", "รัชกาลที่ 9", "รัชกาลที่ 5", "รัชกาลที่ 6"], correctAnswer: "รัชกาลที่ 5" },
            { question: "พระราชกรณียกิจที่สำคัญที่สุดข้อหนึ่งของรัชกาลที่ 5 คืออะไร", options: ["การเลิกทาส", "การสร้างสนามบิน", "การประดิษฐ์อักษรไทย", "การเปลี่ยนชื่อประเทศ"], correctAnswer: "การเลิกทาส" },
            { question: "ข้อใดไม่ใช่พระราชกรณียกิจในสมัยรัชกาลที่ 5", options: ["การสร้างการรถไฟ", "การปฏิรูประบบราชการ", "การจัดตั้งกิจการไปรษณีย์", "การก่อตั้งธนาคารแห่งประเทศไทย"], correctAnswer: "การก่อตั้งธนาคารแห่งประเทศไทย" },
            { question: "คำว่า 'ปิยมหาราช' มีความหมายตรงกับข้อใด", options: ["พระมหากษัตริย์ผู้ยิ่งใหญ่", "พระมหากษัตริย์นักพัฒนา", "พระมหากษัตริย์ที่ทรงเป็นที่รักยิ่งของปวงชน", "พระมหากษัตริย์ผู้ทรงธรรม"], correctAnswer: "พระมหากษัตริย์ที่ทรงเป็นที่รักยิ่งของปวงชน" },
            { question: "โรงพยาบาลหลวงแห่งแรกของไทยที่สร้างขึ้นในสมัยรัชกาลที่ 5 คือโรงพยาบาลใด", options: ["โรงพยาบาลจุฬาลงกรณ์", "โรงพยาบาลศิริราช", "โรงพยาบาลรามาธิบดี", "โรงพยาบาลพระมงกุฎเกล้า"], correctAnswer: "โรงพยาบาลศิริราช" },
            { question: "รัชกาลที่ 5 ทรงเป็นพระมหากษัตริย์ไทยพระองค์แรกที่ทรงทำสิ่งใด", options: ["เสด็จประพาสยุโรป", "ทรงผนวช", "มีพระราชโอรส", "ครองราชย์ครบ 50 ปี"], correctAnswer: "เสด็จประพาสยุโรป" },
            { question: "ระบบการปกครองส่วนภูมิภาคที่เรียกว่า 'มณฑลเทศาภิบาล' เกิดขึ้นในรัชสมัยใด", options: ["รัชกาลที่ 4", "รัชกาลที่ 5", "รัชกาลที่ 6", "รัชกาลที่ 7"], correctAnswer: "รัชกาลที่ 5" },
            { question: "พระบรมราชานุสาวรีย์ที่สำคัญของรัชกาลที่ 5 คือ 'พระบรมรูปทรงม้า' ประดิษฐานอยู่ที่ใด", options: ["สนามหลวง", "อนุสาวรีย์ชัยสมรภูมิ", "ลานพระราชวังดุสิต", "วงเวียนใหญ่"], correctAnswer: "ลานพระราชวังดุสิต" },
            { question: "สิ่งใดที่ถูกนำมาใช้เป็นครั้งแรกในสมัยรัชกาลที่ 5 เพื่อพัฒนาระบบเศรษฐกิจการเงิน", options: ["บัตรเครดิต", "เงินพดด้วง", "เหรียญกษาปณ์", "ธนบัตร"], correctAnswer: "ธนบัตร" }
        ];

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const userName = localStorage.getItem('quizUserName') || "ผู้ทำแบบทดสอบ";
            // แสดงชื่อผู้ทำข้อสอบใน header ของแบบทดสอบ (แต่จะแสดงก็ต่อเมื่อแบบทดสอบปรากฏขึ้น)
            document.getElementById('quiz-header').textContent = `แบบทดสอบวันปิยมหาราช (โดย ${userName})`;

            // จัดการการคลิกปุ่ม "เริ่มทำแบบทดสอบ"
            document.getElementById('start-quiz-button').addEventListener('click', () => {
                document.getElementById('article-section').style.display = 'none'; // ซ่อนบทความ
                document.getElementById('page-title').textContent = document.getElementById('quiz-header').textContent; // เปลี่ยนหัวข้อหลัก
                document.getElementById('quiz-section').style.display = 'block'; // แสดงส่วนแบบทดสอบ
                generateQuiz(); // สร้างแบบทดสอบ
            });
        });

        function generateQuiz() {
            const quizForm = document.getElementById('quiz-form');
            shuffleArray(quizData); // สุ่มลำดับคำถาม

            let quizHTML = '';
            quizData.forEach((questionData, index) => {
                quizHTML += `<div class="question"><p>${index + 1}. ${questionData.question}</p>`;
                
                const shuffledOptions = [...questionData.options];
                shuffleArray(shuffledOptions);
                
                quizHTML += `<div class="options">`;
                shuffledOptions.forEach(option => {
                    quizHTML += `
                        <div>
                            <input type="radio" name="q${index}" id="q${index}_${option}" value="${option}">
                            <label for="q${index}_${option}">${option}</label>
                        </div>
                    `;
                });
                quizHTML += `</div></div>`;
            });
            quizHTML += `<button type="submit">ส่งคำตอบ</button>`;
            quizForm.innerHTML = quizHTML;
            
            quizForm.addEventListener('submit', handleSubmit);
        }

        function handleSubmit(event) {
            event.preventDefault();

            let score = 0;
            let answerDetailsHTML = '<h3>เฉลยแบบทดสอบ</h3>';
            
            quizData.forEach((data, index) => {
                const formName = `q${index}`;
                const userAnswer = (event.target.elements[formName] || {}).value;

                answerDetailsHTML += `<div class="answer-review"><p><strong>${index + 1}. ${data.question}</strong></p>`;
                if (userAnswer) {
                    if (userAnswer === data.correctAnswer) {
                        score++;
                        answerDetailsHTML += `<p>คุณตอบ: <span class="correct">${userAnswer} (ถูกต้อง)</span></p>`;
                    } else {
                        answerDetailsHTML += `<p>คุณตอบ: <span class="incorrect">${userAnswer} (ผิด)</span></p>`;
                        answerDetailsHTML += `<p class="correct-answer-text">เฉลย: ${data.correctAnswer}</p>`;
                    }
                } else {
                    answerDetailsHTML += `<p class="incorrect">คุณไม่ได้ตอบข้อนี้</p>`;
                    answerDetailsHTML += `<p class="correct-answer-text">เฉลย: ${data.correctAnswer}</p>`;
                }
                answerDetailsHTML += `</div><hr>`;
            });

            document.getElementById('quiz-form').style.display = 'none';
            document.getElementById('quiz-header').style.display = 'none'; // ซ่อน header ของแบบทดสอบ

            if (score >= 8) { // เปลี่ยนเป็น >= 8 (มากกว่า 7)
                const userName = localStorage.getItem('quizUserName') || "ผู้ทำแบบทดสอบ";
                const today = new Date();
                const dateString = today.toLocaleDateString('th-TH', { day: 'numeric', month: 'long', year: 'numeric' });

                document.getElementById('cert-name').textContent = userName;
                document.getElementById('cert-score').textContent = `${score} / ${quizData.length} คะแนน`;
                document.getElementById('cert-date').textContent = dateString;
                document.getElementById('certificate').style.display = 'block';

            } else {
                const resultsContainer = document.getElementById('results');
                document.getElementById('score').textContent = `คุณได้ ${score} จาก ${quizData.length} คะแนน`;
                document.getElementById('answer-details').innerHTML = answerDetailsHTML;
                
                const postQuizAction = document.getElementById('post-quiz-action');
                postQuizAction.innerHTML = ''; // เคลียร์ปุ่มเก่าถ้ามี
                const retryButton = document.createElement('button');
                retryButton.textContent = 'ลองใหม่อีกครั้ง';
                retryButton.className = 'retry-button';
                retryButton.onclick = () => window.location.reload(); 
                postQuizAction.appendChild(retryButton);
                
                resultsContainer.style.display = 'block';
            }
        }
    </script>
</body>
</html>
